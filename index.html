<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>청기 백기 게임 (Blue Flag White Flag)</title>
    <link rel="stylesheet" href="./css/style.css" />
  </head>
  <body>
    <!-- 게임 시작 화면 -->
    <div id="start-screen" class="screen active">
      <h1>청기 백기</h1>
      <p class="game-subtitle">Blue Flag White Flag</p>
      <p class="game-description">
        포즈 인식으로 즐기는 전통 놀이!<br />
        명령에 맞는 포즈를 빠르게 취하세요
      </p>
      <button type="button" id="startBtn" class="game-btn start-btn">
        게임 시작
      </button>
      <div class="instructions">
        <h3>게임 방법</h3>
        <ul>
          <li>청기 올려 → 왼손 올리기</li>
          <li>백기 올려 → 오른손 올리기</li>
          <li>둘 다 올려 → 양손 올리기</li>
          <li>올리지 마 → 기본 포즈 유지</li>
        </ul>
      </div>
    </div>

    <!-- 게임 플레이 화면 -->
    <div id="game-screen" class="screen">
      <!-- 게임 정보 영역 -->
      <div class="game-info">
        <div class="info-item">
          <span class="info-label">단계</span>
          <span class="info-value" id="level-display">1</span>
        </div>
        <div class="info-item">
          <span class="info-label">진행</span>
          <span class="info-value" id="progress-display">0/5</span>
        </div>
        <div class="info-item">
          <span class="info-label">실패</span>
          <span class="info-value" id="fails-display">0</span>
        </div>
        <div class="info-item timer-item">
          <span class="info-label">시간</span>
          <span class="info-value" id="timer-display">1.5s</span>
        </div>
      </div>

      <!-- 타이머 프로그레스 바 -->
      <div class="timer-bar-container">
        <div class="timer-bar" id="timer-bar"></div>
      </div>

      <!-- 메인 게임 영역 -->
      <div class="game-main">
        <!-- 청기 (왼쪽) -->
        <div class="flag-container left-flag">
          <div class="flag blue-flag" id="blue-flag">
            <div class="flag-pole"></div>
            <div class="flag-cloth blue"></div>
          </div>
          <div class="flag-label">청기</div>
        </div>

        <!-- 웹캠 화면 (중앙) -->
        <div class="canvas-container">
          <canvas id="canvas"></canvas>
          <div class="pose-overlay" id="pose-overlay"></div>
        </div>

        <!-- 백기 (오른쪽) -->
        <div class="flag-container right-flag">
          <div class="flag white-flag" id="white-flag">
            <div class="flag-pole"></div>
            <div class="flag-cloth white"></div>
          </div>
          <div class="flag-label">백기</div>
        </div>
      </div>

      <!-- 명령 표시 영역 -->
      <div class="command-display" id="command-display">
        명령을 기다리는 중...
      </div>

      <!-- 신호등 표시 -->
      <div class="traffic-light" id="traffic-light">
        <div class="light green" id="light-green"></div>
        <div class="light yellow" id="light-yellow"></div>
        <div class="light red" id="light-red"></div>
      </div>

      <!-- 축포 애니메이션 컨테이너 -->
      <div class="confetti-container" id="confetti-container"></div>
    </div>

    <!-- 게임 종료 화면 -->
    <div id="gameover-screen" class="screen">
      <div class="gameover-content">
        <h1 class="gameover-title">게임 종료!</h1>

        <!-- 현재 게임 기록 -->
        <div class="record-section">
          <h2>게임 기록</h2>
          <div class="record-item">
            <span class="record-label">도달 단계</span>
            <span class="record-value" id="final-level">-</span>
          </div>
          <div class="record-item">
            <span class="record-label">총 성공 횟수</span>
            <span class="record-value" id="final-success">-</span>
          </div>
          <div class="record-item">
            <span class="record-label">게임 시간</span>
            <span class="record-value" id="final-time">-</span>
          </div>
        </div>

        <!-- 최고 기록 -->
        <div class="record-section best-record">
          <h2>최고 기록</h2>
          <div class="record-item">
            <span class="record-label">최고 단계</span>
            <span class="record-value" id="best-level">-</span>
          </div>
          <div class="record-item">
            <span class="record-label">최다 성공</span>
            <span class="record-value" id="best-success">-</span>
          </div>
        </div>

        <!-- 신기록 메시지 -->
        <div class="new-record-message" id="new-record-message">
          🎉 신기록 달성! 🎉
        </div>

        <!-- 재시작 버튼 -->
        <button type="button" id="restartBtn" class="game-btn restart-btn">
          🔄 게임 재시작
        </button>
      </div>
    </div>

    <!-- 디버그 정보 (개발 중에만 표시) -->
    <div id="debug-info" class="debug-info">
      <div id="label-container"></div>
    </div>

    <!-- Teachable Machine 라이브러리 -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.3.1/dist/tf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/pose@0.8/dist/teachablemachine-pose.min.js"></script>

    <!-- 애플리케이션 모듈 -->
    <script src="./js/stabilizer.js"></script>
    <script src="./js/poseEngine.js"></script>
    <script src="./js/gameEngine.js"></script>
    <script src="./js/audioManager.js"></script>
    <script src="./js/main.js"></script>
  </body>
</html>
