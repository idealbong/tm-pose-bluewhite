# 게임 규칙

## 🎮 게임 제목

**청기 백기 (Blue Flag White Flag)**

---

## 📝 게임 설명

전통 놀이 "청기 백기"를 포즈 인식 기술로 재해석한 게임입니다.
화면에 표시되는 명령("청기 올려", "백기 올리지 마" 등)을 보고,
제한 시간 내에 정확한 포즈를 취해야 합니다.

단계가 올라갈수록 제한 시간이 짧아지며 난이도가 증가합니다.
인간의 반응 속도 한계에 도전하세요!

---

## 🎯 게임 목표

- 각 단계마다 5번의 명령을 수행
- 2번 이상 실패하지 않고 단계를 클리어하기
- 가능한 한 높은 단계까지 도달하기
- 인간 반응 속도의 한계를 시험하기

---

## 🕹️ 게임 규칙

### 기본 규칙

1. **시작**
   - "게임 시작" 버튼을 클릭하여 1단계부터 시작
   - 웹캠이 활성화되고 포즈 인식 시작

2. **명령 수행**
   - 화면에 명령이 표시됨 (예: "청기 올려", "백기 올리지 마")
   - 제한 시간 내에 올바른 포즈를 취해야 함

3. **명령 종류와 대응 포즈**
   - **"청기 올려"** → **왼손 올리기** 포즈
   - **"백기 올려"** → **오른손 올리기** 포즈
   - **"둘 다 올려"** → **양손 올리기** 포즈
   - **"청기 올리지 마"** → **기본 포즈 유지** (왼손 내린 상태)
   - **"백기 올리지 마"** → **기본 포즈 유지** (오른손 내린 상태)
   - **"둘 다 올리지 마"** → **기본 포즈 유지** (양손 내린 상태)

4. **성공/실패 판정**
   - ✅ **성공**: 제한 시간 내에 올바른 포즈 감지
   - ❌ **실패**: 제한 시간 내에 잘못된 포즈를 취하거나 올바른 포즈를 취하지 못함

5. **경고 시스템**
   - **1번 실패**: 🟡 노란 불 경고 (경고 상태)
   - **2번 실패**: 🔴 빨간 불 (단계 실패, 게임 종료)

6. **단계 클리어**
   - 5번 중 1번 이하로 실패하면 단계 성공
   - 🟢 초록 불이 켜지며 성공 축포 효과 표시
   - 자동으로 다음 단계로 진입

7. **난이도 증가**
   - 1단계: 1.5초 제한 시간
   - 2단계: 1.4초 (0.1초 감소)
   - 3단계: 1.3초 (0.1초 감소)
   - ...계속해서 0.1초씩 감소
   - 인간의 반응 속도 한계로 인해 최종적으로는 실패하게 됨

8. **게임 종료 및 기록**
   - 2번 실패 시 🔴 빨간 불 + 게임 오버 사운드
   - 게임 화면이 페이드아웃되며 기록 화면으로 전환
   - **기록 화면 표시 내용:**
     - 현재 게임 결과 (도달 단계, 총 성공 횟수, 게임 시간)
     - 최고 기록 (Local Storage에서 불러옴)
     - 신기록 달성 시 특수 효과 및 축하 메시지
   - 재시작 버튼 클릭 시 새 게임 시작

---

## 🎯 게임 플로우

```
시작 화면
   ↓
[게임 시작] 버튼 클릭
   ↓
웹캠 활성화 + 포즈 인식 시작
   ↓
┌──────────────────┐
│   게임 플레이     │
│  (단계별 5회)    │
└──────────────────┘
   ↓
성공 판정 → 다음 명령
   ↓
실패 판정 → 실패 카운트 증가
   ↓
┌──────────────────┐
│  실패 1회 시      │
│  🟡 노란 불 경고  │ → 게임 계속
└──────────────────┘
   ↓
┌──────────────────┐
│  실패 2회 시      │
│  🔴 빨간 불       │ → 게임 종료
│  (게임 오버)      │
└──────────────────┘
   ↓
게임 기록 화면 표시
   - 현재 게임 결과
   - 최고 기록 비교
   - [재시작] 버튼
   ↓
재시작 버튼 클릭 → 처음부터 다시 시작
```

**5회 시행 후 단계 클리어:**
```
5회 완료 (실패 1회 이하)
   ↓
🟢 초록 불 + 축포 효과
   ↓
2초 대기 (축하 애니메이션)
   ↓
다음 단계 진입 (제한 시간 -0.1초)
```

---

## 🖥️ 화면 레이아웃

### 게임 플레이 화면
```
┌─────────────────────────────────────────────────────────┐
│                     게임 정보 영역                        │
│   [단계: 1]  [진행: 3/5]  [실패: 1]  [타이머 바]         │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  [청기]        [웹캠 화면]          [백기]               │
│   🚩          ┌───────────┐          🚩                │
│   ↕️          │           │          ↕️                │
│  올림/내림     │  포즈 인식  │        올림/내림            │
│              │           │                            │
│              └───────────┘                            │
│                                                         │
│                  [명령 표시]                             │
│              "청기 올려!" (큰 텍스트)                      │
│                                                         │
│              [신호등: 🟢/🟡/🔴]                          │
└─────────────────────────────────────────────────────────┘
```

**레이아웃 설명:**
- **중앙**: 웹캠 화면 (포즈 인식 시각화 포함)
- **왼쪽**: 청기 시각화
  - 왼손 올리기 감지 시: 청기 올라간 모습
  - 기본 포즈 시: 청기 내려간 모습
- **오른쪽**: 백기 시각화
  - 오른손 올리기 감지 시: 백기 올라간 모습
  - 기본 포즈 시: 백기 내려간 모습
- **상단**: 게임 정보 (단계, 진행도, 실패 횟수, 타이머)
- **하단**: 명령 표시 및 신호등

### 게임 종료 화면
```
┌─────────────────────────────────────────────────────────┐
│                    🔴 게임 종료!                         │
│                                                         │
│               ──── 게임 기록 ────                        │
│                                                         │
│           도달 단계: X 단계                              │
│           총 성공 횟수: XX회                             │
│           게임 시간: XX:XX                               │
│                                                         │
│               ──── 최고 기록 ────                        │
│                                                         │
│           최고 단계: X 단계                              │
│           최다 성공: XX회                                │
│                                                         │
│                                                         │
│              [🔄 게임 재시작]                            │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

**게임 종료 화면 설명:**
- 현재 게임 기록 표시 (도달 단계, 총 성공 횟수, 게임 시간)
- 최고 기록 표시 (Local Storage에서 불러옴)
- 신기록 달성 시 축하 메시지 및 특수 효과
- 재시작 버튼으로 새 게임 시작

---

## 🎨 필요한 포즈 목록

게임에 필요한 모든 포즈를 나열합니다. (Teachable Machine에서 학습할 클래스)

| 포즈 이름 | 설명 | 대응 명령 | 이모지 |
|---------|------|----------|-------|
| 기본 | 양손을 내린 자연스러운 대기 상태 | "청기/백기/둘 다 올리지 마" | 🧍 |
| 왼손 올리기 | 왼손만 위로 올린 상태 (청기) | "청기 올려" | 🙋‍♂️ (왼손) |
| 오른손 올리기 | 오른손만 위로 올린 상태 (백기) | "백기 올려" | 🙋‍♂️ (오른손) |
| 양손 올리기 | 양손 모두 위로 올린 상태 | "둘 다 올려" | 🙌 |

> **참고**: 각 포즈마다 Teachable Machine에서 최소 100개 이상의 샘플을 수집하는 것을 권장합니다.
> 특히 "기본" 포즈는 다양한 자세를 학습시켜 안정성을 높이세요.

---

## 📊 점수 및 진행도 체계

| 행동 | 결과 |
|-----|------|
| 명령 성공 | 성공 카운트 +1 |
| 첫 번째 실패 | 🟡 노란 불 경고 |
| 두 번째 실패 | 🔴 빨간 불, 게임 종료 |
| 단계 클리어 (5번 중 1번 이하 실패) | 🟢 초록 불, 축포 효과, 다음 단계 진입 |

### 통계 표시
- 현재 단계
- 현재 단계 진행도 (5번 중 몇 번째)
- 현재 단계 실패 횟수 (0/1/2)
- 총 성공 횟수
- 현재 제한 시간

---

## ⏱️ 시간 설정

### 단계별 제한 시간
- **1단계**: 1.5초
- **2단계**: 1.4초
- **3단계**: 1.3초
- **4단계**: 1.2초
- **5단계**: 1.1초
- **6단계**: 1.0초
- **7단계**: 0.9초
- **8단계**: 0.8초
- **9단계**: 0.7초
- **10단계 이상**: 0.6초까지 감소 (최소 제한 시간)

> 인간의 평균 반응 속도는 0.2~0.3초이지만, 포즈 인식 및 포즈 전환 시간을 고려하면
> 0.7초 이하부터는 매우 어려워집니다.

### 타이밍
- **명령 표시 시간**: 즉시 표시
- **제한 시간**: 단계별 설정값
- **다음 명령까지 대기 시간**: 0.5초 (피드백 확인 시간)
- **단계 클리어 후 대기 시간**: 2초 (축포 애니메이션 시간)

---

## 🎖️ 난이도 설정

난이도는 단계에 따라 자동으로 증가합니다.

| 단계 범위 | 난이도 | 제한 시간 | 설명 |
|---------|-------|---------|------|
| 1-3단계 | 쉬움 | 1.5~1.3초 | 여유있는 반응 시간 |
| 4-6단계 | 보통 | 1.2~1.0초 | 빠른 반응 필요 |
| 7-9단계 | 어려움 | 0.9~0.7초 | 매우 빠른 반응 필요 |
| 10단계 이상 | 극한 | 0.6초 | 인간 반응 속도 한계 도전 |

---

## 🎵 추가 기능

### 시각적 효과
- [x] 단계별 타이머 시각화 (프로그레스 바)
- [x] 경고 시스템 (🟡 노란 불, 🔴 빨간 불)
- [x] 성공 표시 (🟢 초록 불)
- [x] 단계 클리어 축포 애니메이션
- [x] 명령 텍스트 강조 효과

### 오디오 효과
- [x] 명령 음성 출력 (TTS: "청기 올려!", "백기 올리지 마!" 등)
- [x] 성공 효과음 (정답 처리 시 경쾌한 소리)
- [x] 실패 효과음 (오답 처리 시 부정적인 소리)
- [x] 경고음 (첫 번째 실패 시 주의 알림음)
- [x] 게임 오버 사운드 (2번 실패 시)
- [x] 축포 사운드 (단계 클리어 시 축하 효과음)
- [x] 배경 음악 (게임 플레이 중 반복 재생, 볼륨 조절 가능)

### 게임 기록
- [x] 최고 도달 단계 저장 (Local Storage)
- [x] 총 성공 횟수 기록
- [x] 게임 종료 시 기록 화면 표시
- [x] 이전 게임 기록과 비교

### UI/UX
- [x] 명령어 크게 표시
- [x] 현재 단계 표시
- [x] 진행도 표시 (5번 중 몇 번째)
- [x] 실시간 제한 시간 카운트다운
- [x] 재시작 버튼 (게임 종료 화면에 위치)
- [x] 청기/백기 시각화 (웹캠 좌우에 배치)
  - 웹캠 왼쪽: 청기 (왼손 올리기 상태에 따라 올라감/내려감)
  - 웹캠 오른쪽: 백기 (오른손 올리기 상태에 따라 올라감/내려감)

---

## 💡 게임 개발 팁

### Teachable Machine 모델 학습 시 주의사항

1. **포즈 구분을 명확하게**
   - 왼손/오른손을 확실히 구분할 수 있도록 학습
   - 양손 올리기는 완전히 양팔을 올린 상태로
   - 기본 포즈는 팔을 자연스럽게 내린 상태

2. **다양한 환경에서 샘플 수집**
   - 밝은 곳 / 어두운 곳
   - 다양한 배경
   - 여러 각도와 거리 (카메라와의 거리)
   - 다양한 옷차림 (소매 긴 옷 / 반팔)

3. **충분한 샘플 수집**
   - 각 클래스당 최소 100개 이상 권장
   - 특히 "기본" 포즈는 200개 이상 추천
   - 더 많을수록 정확도 향상

4. **전환 동작 포함**
   - 한 포즈에서 다른 포즈로 전환하는 중간 동작도 일부 포함
   - 빠른 전환 시 오인식 방지

5. **거울 효과 주의**
   - 웹캠은 좌우가 반전되므로, 자신의 왼손이 화면에서는 오른쪽에 보임
   - 명령과 포즈 매칭 시 이를 고려하여 학습

---

## 📝 개발 체크리스트

게임 개발 과정을 체크하세요.

- [ ] 게임 규칙 작성 완료 ✅
- [ ] Teachable Machine 포즈 모델 학습 (4개 클래스)
  - [ ] 기본 포즈
  - [ ] 왼손 올리기
  - [ ] 오른손 올리기
  - [ ] 양손 올리기
- [ ] 모델 파일 `my_model/` 폴더에 배치
- [ ] `js/gameEngine.js` 청기 백기 게임 로직 구현
  - [ ] 명령 발급 시스템 (6가지 명령 랜덤 발급)
  - [ ] 포즈 검증 로직 (명령과 포즈 매칭)
  - [ ] 경고 시스템 (노란 불/빨간 불/초록 불)
  - [ ] 단계 클리어 로직 (5회 중 1회 이하 실패)
  - [ ] 난이도 증가 시스템 (0.1초씩 감소)
  - [ ] 게임 종료 처리 (2번 실패 시)
  - [ ] 게임 기록 관리 (Local Storage)
- [ ] 오디오 시스템 구현
  - [ ] TTS 음성 출력 (명령 읽기)
  - [ ] 효과음 추가 (성공/실패/경고/게임오버/축포)
  - [ ] 배경 음악 재생
- [ ] `index.html` UI 수정
  - [ ] 게임 플레이 화면
    - [ ] 명령 표시 영역
    - [ ] 단계/진행도 표시
    - [ ] 경고 표시 (신호등)
    - [ ] 타이머 프로그레스 바
    - [ ] 청기 시각화 (웹캠 왼쪽)
    - [ ] 백기 시각화 (웹캠 오른쪽)
  - [ ] 게임 종료 화면
    - [ ] 현재 게임 기록 표시
    - [ ] 최고 기록 표시
    - [ ] 재시작 버튼
- [ ] `css/style.css` 스타일 적용
  - [ ] 청기 백기 테마 디자인
  - [ ] 신호등 효과 (노란 불/빨간 불/초록 불)
  - [ ] 축포 애니메이션
  - [ ] 청기/백기 애니메이션 (올라감/내려감)
  - [ ] 게임 종료 화면 스타일
  - [ ] 페이드 인/아웃 전환 효과
- [ ] 로컬 테스트 완료
- [ ] GitHub에 push
- [ ] GitHub Pages 배포 완료

---

## 🚀 다음 단계

1. ✅ 이 파일(GAME_RULE.md) 작성 완료
2. Teachable Machine에서 4개 포즈 학습
   - 기본, 왼손 올리기, 오른손 올리기, 양손 올리기
3. AI 코딩 도구 활용:
   ```
   "GAME_RULE.md 파일을 읽고, 청기 백기 게임 로직을 구현해줘.
   js/gameEngine.js, js/main.js, index.html, css/style.css를 수정해줘."
   ```
4. 로컬 테스트 및 디버깅
5. GitHub Pages로 배포!

---

## 🎯 게임 플레이 예시 시나리오

### 1단계 (1.5초 제한)
1. "청기 올려" → 왼손 올림 ✅ 성공
2. "백기 올리지 마" → 기본 포즈 유지 ✅ 성공
3. "둘 다 올려" → 양손 올림 ✅ 성공
4. "청기 올리지 마" → 실수로 왼손 올림 ❌ 실패 → 🟡 노란 불
5. "백기 올려" → 오른손 올림 ✅ 성공

**결과**: 5번 중 1번 실패 → 🟢 단계 클리어! 축포 효과! 🎉

### 2단계 (1.4초 제한)
1. "백기 올려" → 오른손 올림 ✅ 성공
2. "둘 다 올리지 마" → 기본 포즈 유지 ✅ 성공
3. "청기 올려" → 시간 초과 ❌ 실패 → 🟡 노란 불
4. "둘 다 올려" → 양손 올림 ✅ 성공
5. "백기 올리지 마" → 실수로 오른손 올림 ❌ 실패 → 🔴 빨간 불

**결과**: 2번 실패 → 게임 종료!

**최종 기록**: 2단계 도달, 총 8번 성공
